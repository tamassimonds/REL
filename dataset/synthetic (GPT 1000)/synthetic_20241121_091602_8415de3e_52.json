{
  "problem": "Every card in a deck has a picture of one shape - circle, square, or triangle, which is painted in one of the three colors - red, blue, or green. Furthermore, each color is applied in one of three shades - light, medium, or dark. The deck has 27 cards, with every shape-color-shade combination represented. A set of three cards from the deck is called complementary if all of the following statements are true:\ni. Either each of the three cards has a different shape or all three of the card have the same shape.\nii. Either each of the three cards has a different color or all three of the cards have the same color.\niii. Either each of the three cards has a different shade or all three of the cards have the same shade.\nHow many different complementary three-card sets are there?\n",
  "solution": "To determine the number of complementary three-card sets from a deck of 27 unique cards, we analyze the conditions based on the attributes of the cards: shapes, colors, and shades.\n\n### Step 1: Card Attributes\nEach card features:\n- **3 shapes**: Circle, Square, Triangle\n- **3 colors**: Red, Blue, Green\n- **3 shades**: Light, Medium, Dark\n\nThis results in \\(3 \\times 3 \\times 3 = 27\\) unique cards.\n\n### Step 2: Definition of Complementary Sets\nA set of three cards is considered complementary if:\n1. All three cards share the same shape, or all have different shapes.\n2. All three cards share the same color, or all have different colors.\n3. All three cards share the same shade, or all have different shades.\n\n### Step 3: Case Analysis\nWe analyze the combinations based on the similarities and differences in attributes:\n\n#### Case 1: All Attributes the Same\nThis is not possible since the cards must be distinct.\n\n#### Case 2: Two Attributes the Same\n- **Select 2 attributes to be the same**: There are \\(\\binom{3}{2} = 3\\) ways to choose which two attributes will be the same.\n- For each chosen attribute, there are 3 options (values).\n- The remaining attribute must be different and has 3 options.\n\nThus, the count is:\n\\[\n3 \\text{ (selected attributes)} \\times 3 \\text{ (same value)} \\times 1 \\text{ (different value)} = 9\n\\]\nWith 3 pairs of attributes:\n\\[\n9 \\times 3 = 27 \\text{ sets}\n\\]\n\n#### Case 3: One Attribute the Same\n- **Select 1 attribute to be the same**: There are \\(\\binom{3}{1} = 3\\) ways to choose this attribute.\n- The selected attribute can take any of 3 values.\n- The other two attributes must be different, which can be selected in \\(3 \\times 2 = 6\\) ways.\n\nThe arrangements for this setup can occur in \\(3!\\) (6) ways, leading to:\n\\[\n3 \\text{ (same attribute)} \\times 3 \\text{ (first different)} \\times 2 \\text{ (second different)} \\times 6 \\text{ (arrangements)} = 108\n\\]\nSince each set is counted for each permutation, we divide by 3:\n\\[\n108 / 3 = 54 \\text{ sets}\n\\]\n\n#### Case 4: All Attributes Different\nIn this scenario, we can choose one value from each attribute:\n\\[\n3! \\text{ (shapes)} \\times 3! \\text{ (colors)} = 6 \\times 6 = 36 \\text{ sets}\n\\]\n\n### Step 4: Total Count of Sets\nSumming the contributions from each case gives:\n1. Case 2 (two attributes the same): **27**\n2. Case 3 (one attribute the same): **54**\n3. Case 4 (all attributes different): **36**\n\nThe total number of complementary three-card sets is:\n\\[\n27 + 54 + 36 = 117\n\\]\n\n### Final Answer\nThus, the total number of different complementary three-card sets is \\(\\boxed{117}\\).",
  "ground_truth": "Case 1: All three attributes are the same. This is impossible since sets contain distinct cards.\nCase 2: Two of the three attributes are the same. There are ${3\\choose 2}$ ways to pick the two attributes in question. Then there are $3$ ways to pick the value of the first attribute, $3$ ways to pick the value of the second attribute, and $1$ way to arrange the positions of the third attribute, giving us ${3\\choose 2} \\cdot 3 \\cdot 3 = 27$ ways.\nCase 3: One of the three attributes are the same. There are ${3\\choose 1}$ ways to pick the one attribute in question, and then $3$ ways to pick the value of that attribute. Then there are $3!$ ways to arrange the positions of the next two attributes, giving us ${3\\choose 1} \\cdot 3 \\cdot 3! = 54$ ways.\nCase 4: None of the three attributes are the same. We fix the order of the first attribute, and then there are $3!$ ways to pick the ordering of the second attribute and $3!$ ways to pick the ordering of the third attribute. This gives us $(3!)^2 = 36$ ways.\nAdding the cases up, we get $27 + 54 + 36 = \\boxed{117}$."
}
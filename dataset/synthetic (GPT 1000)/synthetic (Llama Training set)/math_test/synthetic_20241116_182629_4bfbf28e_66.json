{
  "problem": "Let $a = \\frac{\\pi}{2008}$. Find the smallest positive integer $n$ such that\n\\[\\sum_{k = 1}^n 2 \\cos (k^2 a) \\sin (ka)\\]is an integer.",
  "solution": {
    "final_solution": "",
    "working_out": "Alright, let's tackle this problem by thoroughly thinking through each step.\n\n### Initial Thoughts\n\nThe given problem is asking for the smallest positive integer \\( n \\) such that:\n\\[ \\sum_{k=1}^n 2 \\cos(k^2 a) \\sin(ka) \\]\nis an integer. The expression involves trigonometric functions and sums, which suggests that there might be some symmetries or periodic properties we can take advantage of. \n\n#### Brainstorming and Exploration of Strategies\n\n1. **Trigonometric Identities**: Given that the terms include products of sine and cosine, one initial idea is to use trigonometric identities to simplify the expression. There's the identity:\n   \\[ 2 \\cos \\theta \\sin \\phi = \\sin(\\theta + \\phi) - \\sin(\\theta - \\phi) \\]\n   Applying this identity could simplify the problem into a telescoping series or reveal periodicity.\n\n2. **Periodic Properties**: Since \\( a = \\frac{\\pi}{2008} \\), it's closely related to the unit circle property because it's a fraction of \\(\\pi\\). It might help to inspect how \\( \\cos(k^2 a) \\) and \\( \\sin(ka) \\) behave over several periods. \n\n3. **Pattern Recognition**: Calculating the first few terms manually might help identify a pattern or a periodic structure that simplifies finding the smallest \\( n \\).\n\n4. **Modular Arithmetic**: Sometimes, angles in radians expressed as fractions of \\(\\pi\\) lead to useful properties in modulo calculations, especially if they become rational or whole values under conditions like specific multiples.\n\n#### Initial Calculations\n\nFirst, let\u2019s apply the trigonometric identity:\n\\[ 2 \\cos(k^2 a) \\sin(ka) = \\sin((k^2 + k)a) - \\sin((k^2 - k)a) \\]\n\nThis form suggests telescoping if there exists a simplification or cancellation over several terms of \\( k \\).\n\nLet's calculate the first few terms to look for a pattern:\n\n- **For \\( k = 1 \\):**\n  \\[ T_1 = 2 \\cos(a) \\sin(a) = \\sin(2a) \\]\n\n- **For \\( k = 2 \\):**\n  \\[ T_2 = 2 \\cos(4a) \\sin(2a) = \\sin(6a) - \\sin(2a) \\]\n\n- **For \\( k = 3 \\):**\n  \\[ T_3 = 2 \\cos(9a) \\sin(3a) = \\sin(12a) - \\sin(6a) \\]\n\n#### Observing Patterns\n\nWith telescoping in mind, let's write the sum:\n\n\\[ S_n = \\sin(2a) + [\\sin(6a) - \\sin(2a)] + [\\sin(12a) - \\sin(6a)] + \\cdots + [\\sin((n^2+n)a) - \\sin((n^2-n)a)] \\]\n\nThis appears to telescope into:\n\\[ S_n = \\sin((n^2+n)a) \\]\n\n### Ensuring \\( S_n \\) is an Integer\n\nThus, \\( \\sin((n^2+n)a) \\) must equal zero for it to be an integer. This happens when:\n\\[ (n^2 + n)a = m\\pi \\]\nfor some integer \\( m \\), leading to:\n\\[ \\frac{(n^2 + n) \\pi}{2008} = m\\pi \\]\n\nCancelling \\(\\pi\\):\n\\[ n(n+1) = 2008m \\]\n\nThus, \\( n(n+1) \\) must be a multiple of 2008. \n\n### Factors of 2008\n\nWe need to determine the smallest integer \\( n \\) such that \\( n(n+1) \\equiv 0 \\pmod{2008} \\).\n\nThe prime factorization of 2008 is:\n\\[ 2008 = 2^3 \\times 251 \\]\n\nThe smallest \\( n \\) fulfills \\( n(n+1) \\) covering all prime factors, particularly needing to be divisible by 251.\n\n- **Trying \\( n = 251 - 1 \\):**  \n  \\( n = 251 \\), then \\( n+1 = 252 \\).\n\nOur calculations show:\n\\[ 252 = 2^2 \\times 3^2 \\times 7 \\]\n\nHere, \\( n(n+1) \\equiv 0 \\pmod{2008} \\).\n\nThus, the smallest possible \\( n \\) meeting this condition is indeed \\( 251 \\).\n\n### Conclusion\n\nThe smallest positive integer \\( n \\) such that the given sum is an integer is \\( n = 251 \\). \n\nThis concludes the thorough exploration and the resulting identification of the smallest \\( n \\).",
    "is_correct": true,
    "iterations": 1,
    "error_description": null,
    "log_directory": "logs/solutions/20241116_182617"
  },
  "ground_truth": "By the product-to-sum identities, we have that $2\\cos a \\sin b = \\sin (a+b) - \\sin (a-b)$. Therefore, this reduces to a telescoping series:  \\begin{align*}\n\\sum_{k=1}^{n} 2\\cos(k^2a)\\sin(ka) &= \\sum_{k=1}^{n} [\\sin(k(k+1)a) - \\sin((k-1)ka)]\\\\\n&= -\\sin(0) + \\sin(2a)- \\sin(2a) + \\sin(6a) - \\cdots - \\sin((n-1)na) + \\sin(n(n+1)a)\\\\\n&= -\\sin(0) + \\sin(n(n+1)a)\\\\\n&= \\sin(n(n+1)a).\n\\end{align*}Thus, we need $\\sin \\left(\\frac{n(n+1)\\pi}{2008}\\right)$ to be an integer; this integer can be only $\\{-1,0,1\\}$, which occurs when $2 \\cdot \\frac{n(n+1)}{2008}$ is an integer. Thus $1004 = 2^2 \\cdot 251$ divides $n(n+1)$.  Since 251 is prime, 251 must divide $n$ or $n + 1.$\n\nThe smallest such $n$ is 250, but 1004 does not divide $250 \\cdot 251.$  The next smallest such $n$ is 251, and 1004 divides $251 \\cdot 252.$  Therefore, the smallest such integer $n$ is $\\boxed{251}.$"
}